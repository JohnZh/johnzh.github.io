---
layout: post
title:  "Android 开发：组件化开发"
date:   2020-03-19 00:00:00 +0800
categories: []
---

# 为什么要组件化	
单一工程架构，随着模块的增加，模块之间耦合度会加大，为了维护和开发新功能，开发人员会需要了解大部分代码，协同开发问题会增加，代码量的增加重新编译运行调试时间成本会上升，单元测试会变得很困难。

于是组件化开发就是为了解决上述的提及的这些问题，而关键点在于“解耦”。

# 单一工程架构
一般情况下为两层结构：

1. 主业务层：A 业务模块，B 业务模块，C 业务模块……
2. 功能依赖：工具库，网络请求库，通用可复用的控件等

明确关系：

1. 业务模块存在互相调用的关系，即 A 调用 BC，B 调用 AC……
2. 业务模块存在调用功能依赖的关系
3. 功能依赖之间存在互相调用关系

# 组件化开发
重新分层：

1. App 壳
2. 主业务层：A 业务组件，B 业务组件，C 业务组件……（业务组件）
3. 业务相关功能组件：通用可复用的控件，和业务相关的支付，扫码，分享等
4. 业务无关功能组件：缓存，日志，网络（和业务相关时候就会上升到 3 ），还有一些第三方依赖

在开发阶段，主业务层的业务组件作为 App 独立开发，集成阶段作为 aar 集成到 App 壳上

为了解耦业务组件，业务组件之间的调用会采用路由转发的方式：即所有的业务组件之间的调用都会先通过路由再进行。例如，A 业务组件 -> 路由 -> B 业务组件



